<!--miniprogram/pages/page_admin/page_admin.wxml-->
<van-nav-bar title="教务员页面" right-text="注销" bind:click-right="onClickRight" />

<view>
  <van-tabs active="{{ active }}" bind:change="onChangeTab" swipe-threshold="3">

    <van-tab title="教材预订">
      <van-cell title="教材预订发布" value="跳转" is-link url="../page_admin_book/page_admin_book" />
      <van-collapse value="{{ activeNamesBookMgmt }}" bind:change="onChangeCollapseBookMgmt">
        <van-collapse-item title="发布历史" name="1">
          <view id="selectShow">
            <view id="selectTag">
              <van-row>
                <van-col span="20" offset="2">
                  <van-row>
                    <van-col span="20">
                      <van-collapse value="{{ activeNamesBookSelect }}" bind:change="onChangeCollapseBookSelect">
                        <van-collapse-item title="筛选" name="1">
                          筛选选项
                        </van-collapse-item>
                      </van-collapse>
                    </van-col>
                    <van-col span="4">
                      <view class="container">
                        <van-button type="primary" style="margin:10px" size="small" bind:click="btn_search">查询</van-button>
                      </view>
                    </van-col>
                  </van-row>
                </van-col>
              </van-row>
            </view>
            <view id="showBookMgmt">
              <view wx:for="{{order_list}}" wx:key="order_listID" class="card-container">
                <van-card desc="{{item.order_college}} {{item.order_grade}}级 - {{item.order_major}}" title="《{{item.order_book_name}}》" bind:click="viewItem">
                  <view slot="tags">学期：{{item.order_semester}}</view>
                  <view slot="tags">课程：{{item.order_course}}</view>
                  <view slot="tags">单号：{{item._id}}</view>
                  <view slot="tags">创建：{{item.order_create_date}}</view>
                  <view slot="footer" class="foot-btn">
                    <van-button wx:if="{{item.order_timeout}}" size="mini" disabled type="warning" plain>已逾期</van-button>
                    <van-button id="{{item._id}}" size="mini" bind:click="viewItem">详细</van-button>
                  </view>
                </van-card>
              </view>
            </view>
          </view>
        </van-collapse-item>
      </van-collapse>
    </van-tab>

    <van-tab title="二手教材管理">
      <van-collapse value="{{ activeNamesSec }}" bind:change="onChangeCollapseSec">
        <van-collapse-item title="待审核二手申请" name="1">
          <view id="showSecCheck">
            <view wx:for="{{secCheck_list}}" wx:key="recCheck_listID" class="card-container">
              <van-card desc="{{item.sec_college}} {{item.sec_grade}}级 - {{item.sec_major}}" title="《{{item.sec_book_name}}》" bind:click="viewItemSecCheck">
                <view slot="tags">学期：{{item.sec_semester}}</view>
                <view slot="tags">课程：{{item.sec_course}}</view>
                <view slot="tags">单号：{{item._id}}</view>
                <view slot="tags">创建：{{item.sec_create_date}}</view>
                <view slot="footer" class="foot-btn">
                  <van-button wx:if="{{item.sec_status==1}}" size="mini" type="info" plain>待审核</van-button>
                  <van-button id="{{item._id}}" size="mini" bind:click="viewItemsecCheck">详细</van-button>
                </view>
              </van-card>
            </view>
          </view>
        </van-collapse-item>
        <van-collapse-item title="审核历史" name="2">
          <view id="showSecMgmt">
            <view wx:for="{{sec_list}}" wx:key="sec_listID" class="card-container">
              <van-card desc="{{item.sec_college}} {{item.sec_grade}}级 - {{item.sec_major}}" title="《{{item.sec_book_name}}》" bind:click="viewItemSec">
                <view slot="tags">学期：{{item.sec_semester}}</view>
                <view slot="tags">课程：{{item.sec_course}}</view>
                <view slot="tags">单号：{{item._id}}</view>
                <view slot="tags">创建：{{item.sec_create_date}}</view>
                <view slot="footer" class="foot-btn">
                  <!-- //状态：0不可见，1初始，10为通过，11为不通过 -->
                  <van-button wx:if="{{item.sec_status==11}}" size="mini" type="warning" plain>不通过</van-button>
                  <van-button wx:if="{{item.sec_status==10}}" size="mini" type="primary" plain>通过</van-button>
                  <van-button id="{{item._id}}" size="mini" bind:click="viewItemSecCheck">详细</van-button>
                </view>
              </van-card>
            </view>
          </view>
        </van-collapse-item>
      </van-collapse>
    </van-tab>

    <van-tab title="教材推荐管理">
      <van-collapse value="{{ activeNamesRec }}" bind:change="onChangeCollapseRec">
        <van-collapse-item title="待审核推荐" name="1">
          <view id="showRecCheck">
            <view wx:for="{{recCheck_list}}" wx:key="recCheck_listID" class="card-container">
              <van-card desc="{{item.rec_college}} {{item.rec_grade}}级 - {{item.rec_major}}" title="{{item.rec_semester}}学期 - {{item.rec_course}} -《{{item.rec_book_name}}》" bind:click="viewItemRecCheck">
                <view slot="tags">单号：{{item._id}}</view>
                <view slot="tags">创建：{{item.rec_create_date}}</view>
                <view slot="footer" class="foot-btn">
                  <van-button wx:if="{{item.rec_status==1}}" size="mini" type="info" plain>待审核</van-button>
                  <van-button id="{{item._id}}" size="mini" bind:click="viewItemRecCheck">详细</van-button>
                </view>
              </van-card>
            </view>
          </view>
        </van-collapse-item>
        <van-collapse-item title="审核历史" name="2">
          <view id="showRecMgmt">
            <view wx:for="{{rec_list}}" wx:key="rec_listID" class="card-container">
              <van-card desc="{{item.rec_college}} {{item.rec_grade}}级 - {{item.rec_major}}" title="{{item.rec_semester}}学期 - {{item.rec_course}} -《{{item.rec_book_name}}》" bind:click="viewItemRec">
                <view slot="tags">单号：{{item._id}}</view>
                <view slot="tags">创建：{{item.rec_create_date}}</view>
                <view slot="footer" class="foot-btn">
                  <!-- //状态：0不可见，1初始，10为通过，11为不通过 -->
                  <van-button wx:if="{{item.rec_status==11}}" size="mini" type="warning" plain>不通过</van-button>
                  <van-button wx:if="{{item.rec_status==10}}" size="mini" type="primary" plain>通过</van-button>
                  <van-button id="{{item._id}}" size="mini" bind:click="viewItemRecCheck">详细</van-button>
                </view>
              </van-card>
            </view>
          </view>
        </van-collapse-item>
      </van-collapse>
    </van-tab>

    <van-tab title="设置">
      <view class="container">
        <view id="showUserList">
          <view wx:for="{{user_list}}" wx:key="user_listID">
            <van-card desc="{{item.user_college}} {{item.user_grade}}级 - {{item.user_major}}" title="{{item.user_id}}" bind:click="viewUser">
              <view slot="tags"></view>
              <view slot="footer">
                <van-button id="{{item._id}}" size="mini" bind:click="viewUser">详细</van-button>
              </view>
            </van-card>
          </view>
        </view>
      </view>

    </van-tab>

  </van-tabs>
</view>